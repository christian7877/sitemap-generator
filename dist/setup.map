{"version":3,"sources":["webpack:///webpack/bootstrap 827a2bccaddd5525062b","webpack:///./src/ui/setup.js"],"names":["Setup","siteUrl","getParameterByName","window","location","href","siteUrlInput","document","getElementsByName","startButton","getElementById","removePageFromUrl","value","onclick","onStartButtonClick","name","url","replace","regex","RegExp","results","exec","decodeURIComponent","e","urlValidation","validateUrl","error","requestDomain","config","contenttypePatterns","excludeExtension","successCodes","maxTabCount","chrome","runtime","sendMessage","start","target","innerText","appPath","lastIndexOf","parts","split","last","length","indexOf","pop","join","siteUrlInputError","trim","message","shift","className","result","classList","remove"],"mappings":"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","file":"827a2bccaddd5525062b.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 827a2bccaddd5525062b","/**\r\n * @class\r\n * @description This module is used to configure runtime params for sitemap generation\r\n */\r\nclass Setup {\r\n\r\n    constructor() {\r\n\r\n        let siteUrl = Setup.getParameterByName('u', window.location.href),\r\n            siteUrlInput = document.getElementsByName('url')[0],\r\n            startButton = document.getElementById('start');\r\n\r\n        // the initial url will be active tab url if available\r\n        siteUrl = Setup.removePageFromUrl(siteUrl);\r\n        siteUrlInput.value = siteUrl;\r\n        startButton.onclick = Setup.onStartButtonClick;\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * @description Get property from window url\r\n     */\r\n    static getParameterByName(name, url) {\r\n        name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n        let regex = new RegExp('[?&]' + name +\r\n            '(=([^&#]*)|&|#|$)'), results = regex.exec(url);\r\n\r\n        if (!results) return null;\r\n        if (!results[2]) return '';\r\n        return decodeURIComponent(results[2]\r\n            .replace(/\\+/g, ' '));\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * @description Handle start button click -> this will check user inputs\r\n     * and if successful, send message to background page to initiate crawling.\r\n     * @param {Object} e - click event\r\n     */\r\n    static onStartButtonClick(e) {\r\n\r\n        let urlValidation = Setup.validateUrl();\r\n\r\n        if (urlValidation.error) {\r\n            return;\r\n        }\r\n\r\n        let url = urlValidation.url,\r\n            requestDomain = (url + '/*').replace('//*', '/*'),\r\n            config = {\r\n                url: url,\r\n                requestDomain: requestDomain,\r\n                contenttypePatterns: ['text/html', 'text/plain'],\r\n                excludeExtension: ['.png', '.json', '.jpg', '.jpeg', '.js', '.css',\r\n                    '.zip', '.mp3', '.mp4', '.ogg', '.avi', '.wav', '.webm', '.gif', '.ico'],\r\n                successCodes: [200, 201, 202, 203, 304],\r\n                maxTabCount: 25\r\n            };\r\n\r\n        window.chrome.runtime.sendMessage({start: config});\r\n        e.target.innerText = 'Starting....';\r\n        document.getElementById('start').onclick = false;\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * @description if url ends with page e.g. \"index.html\" we want to remove\r\n     * this and just keep the application path\r\n     * @param {String} appPath - url\r\n     */\r\n    static removePageFromUrl(appPath) {\r\n        if (appPath && appPath.lastIndexOf('/') > 8) {\r\n            let parts = appPath.split('/'),\r\n                last = parts[parts.length - 1];\r\n\r\n            if (!last.length || last.indexOf('.') > 0 ||\r\n                last.indexOf('#') >= 0 || last.indexOf('?') >= 0) {\r\n                parts.pop();\r\n            }\r\n            appPath = parts.join('/');\r\n        }\r\n        return appPath;\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * @description Make sure url input is correct\r\n     * @returns {Object} - validation response\r\n     */\r\n    static validateUrl() {\r\n        let siteUrlInput = document.getElementsByName('url')[0],\r\n            siteUrlInputError = document.getElementById('url-error'),\r\n            url = Setup.removePageFromUrl((siteUrlInput.value || '')).trim(),\r\n            message = '';\r\n\r\n        if (url.length < 1) {\r\n            message = 'Url value is required';\r\n        } else if (url.split('/').shift().indexOf('http') !== 0) {\r\n            message = 'Url must start with http:// or https://';\r\n        }\r\n        let error = message.length,\r\n            className = 'is-invalid',\r\n            result = {url: url, error: error};\r\n\r\n        siteUrlInputError.innerText = message;\r\n        if (error) {\r\n            siteUrlInput.className += ' ' + className;\r\n        } else {\r\n            siteUrlInput.classList.remove(className);\r\n        }\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\n(() => new Setup())();\r\n\r\nexport default Setup;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/setup.js"],"sourceRoot":""}